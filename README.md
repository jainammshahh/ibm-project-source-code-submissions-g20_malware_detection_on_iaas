# Project Overview

<p align="left"> <a href="https://aws.amazon.com/" target="_blank" rel="noreferrer"> <img src="https://img.shields.io/badge/Amazon_AWS-FF9900?style=for-the-badge&logo=amazonaws&logoColor=white" width="120" height="30"/> </a> 
<a href="https://www.kali.org/" target="_blank" rel="noreferrer"> <img src="https://img.shields.io/badge/Kali_Linux-557C94?style=for-the-badge&logo=kali-linux&logoColor=white" alt="linux" width="120" height="30"/> </a> 
<a href="https://www.python.org" target="_blank" rel="noreferrer"> <img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue" alt="python" width="120" height="30"/> </a>
<a href="https://www.splunk.com/" target="_blank" rel="noreferrer"> <img src="https://img.shields.io/badge/Splunk-000000?style=for-the-badge&logo=Splunk&logoColor=white" alt="splunk" width="120" height="30"/> </a> </p>

With the advent of Cloud computing being espoused very briskly by organizations with diverse businesses and sizes, the utilization of cloud services is soaring at an untrackable rate these days more importantly IaaS services as cloud providers allow more secured resources with supple offerings and models. This escalating adoption gives birth to new surface attacks to organizations that attackers tend to abuse with their malware to dominate these invaluable resources and the important data that is stored on them. Therefore, for organizations in order to well guard against these malware attacks they need to have full discernibility not only on their data centers but also on their resources which are stored on the cloud. 


This proposed project discusses and aims to yield the best approaches to attain continuous monitoring of malware attacks on the cloud along with their phases (before, during, and after). This project line ups to defines the best methods to bring loggings and forensics to the cloud platform and integrate them with on-premises visibility, thus attaining the full monitoring over the whole security standpoint of the organization assets whether they are on-premises or on the cloud.

# Architecture

<img width="358" alt="Picture1" src="https://github.com/jainammshahh/ibm-project-source-code-submissions-g20_malware_detection_on_iaas/assets/114266749/e0f81f5d-02d9-4dc1-80ad-4b7b8d8a0c98">

# Methodology

The implementation of the project involves two main phases: Cloud Analysis for Malware Detection and Forensic Analysis in the IaaS Cloud environment. Below is a brief summary of the key implementation details for each phase:

### Phase 1: Cloud Analysis for Malware Detection

#### 1 Test Environment

-   The project was conducted on Amazon Web Services (AWS) due to its market leadership and extensive range of cloud services.

#### 2 Data Set

-   Data for testing was sourced from NIST and MITRE ATT&CK frameworks, which provide valuable datasets for monitoring and analysis.
-   ETL played an essential role for preparing data for analysis and ensuring that it is in a usable format. It played a critical role in data monitoring and forensic analysis by allowing data from different sources to be unified, making it easier to identify anomalies, detect potential threats, and ensure data integrity.

-   AWS CodePipeline: AWS CodePipeline was utulized which provided a set of continuous integration and continuous delivery (CI/CD) tools for automating the building, testing, and deployment of applications and infrastructure. Data from CodePipeline was crucial for monitoring and analyzing the deployment pipeline, identifying any unauthorized changes in the code or infrastructure, and detecting potential vulnerabilities in the CI/CD process.

-  AWS Glue: AWS Glue was used as it is a fully managed extract, transform, and load (ETL) service that makes it easy to prepare and load data for analytics. Data from AWS Glue was utilized for monitoring and analyzing data transformation processes, ensuring data integrity, and identifying any anomalies or unauthorized data access.

#### 3 Testing and Analysis Tools

-   AWS CloudWatch: Used for gathering and monitoring metrics, log files, setting alarms, and responding to changes.
-   AWS CloudTrail: A service for logging AWS API calls and providing log files.
-   AWS S3: Utilized for storing data and hosting a static website.
-   Kali Linux: Used for simulating malware attacks.

#### 4 Testing Phases

1.  Creating AWS Billing Alarm: Detection of potential attacks by monitoring changes in AWS billing.
2.  Performing Continuous Monitoring in AWS Environment: Utilized AWS Config to monitor resource configurations and changes for malicious activity.
3.  Performing a Malware Attack: Steps involved in initiating a malware attack on an S3 bucket.
4.  Implementing Data Monitoring using SNS: Utilized Amazon Simple Notification Service (SNS) to monitor data logging activities in S3 buckets.

#### 5 Generating Data Logs from AWS CloudTrail

-   Enabled CloudTrail to continuously deliver log files to an Amazon S3 bucket for monitoring account activity and API calls.
-   Created a trail for monitoring S3 activities and used SNS subscriptions to track log and event generation.

#### 6 Integrating AWS CloudTrail with Splunk

-   Configured Splunk to receive and analyze AWS CloudTrail data logs, enhancing visibility and analysis capabilities.
-   Utilized IAM policies for Splunk Add-on to define the fields and parameters for analysis.

#### 7 Forensic Analysis After Malware Attack

-   Conducted forensic analysis using the SIFT (SANS Investigative Forensic Toolkit) workstation.
-   Created snapshots and volumes for evidence preservation.
-   Used Loki for detecting indicators of compromise.
-   Analyzed CloudTrail logs to identify suspicious activities.

### Phase 2: Forensic Analysis in IaaS Cloud

#### Additional Forensic Analysis

-   Investigated startup scripts and unusual files.
-   Used SUID and SGID file analysis to identify potential vulnerabilities.
-   Employed DensityScout to detect high-entropy files.
-   Conducted malware scanning using Clamscan.
-   Utilized third-party hash look-ups on virustotal.com for deeper analysis of infected files.

The project demonstrated a comprehensive approach to detect and respond to malware attacks in a cloud environment, followed by detailed forensic analysis to understand the extent of the attack and gather evidence for further investigation. It combined AWS services, open-source tools, and best practices in cloud security and forensics to enhance the security posture of cloud-hosted environments.





